# .instructions.md Update Summary

## üìä Update Statistics

- **Total Lines**: 2,210 (comprehensive project-specific guide)
- **Date Updated**: October 16, 2025
- **Project Version**: v1.0.0+1

## üéØ What Was Updated

### 1. Project-Specific Context (NEW)

- Added detailed PCQ FIR Pilot App overview
- Documented complete technology stack with versions
- Included architecture diagrams and directory structure

### 2. State Management Patterns (ENHANCED)

**AsyncNotifier Pattern (Primary)**

- Complete state class pattern with copyWith
- AsyncNotifier implementation examples
- Provider type usage guidelines:
  - AsyncNotifierProvider for business logic
  - NotifierProvider for simple state
  - Provider for dependencies
  - StreamProvider for real-time data
- UI consumption patterns with ref.watch and ref.listen

### 3. Network Layer Documentation (NEW)

**ApiClient Pattern**

- ApiState sealed class documentation
- Repository pattern implementation
- Error handling with ApiErrorType
- Complete examples from actual codebase

### 4. UI Components & Theming (ENHANCED)

**Custom Widgets**

- CustomScaffold - App-wide consistent scaffold
- CustomButton - Primary/Outlined variants with gradient
- CustomTextField - Form fields with validation
- CustomDropdown - Matching text field styling
- All examples match actual implementation

**Color System**

- Documented AppColors constants (k prefix convention)
- Theme system with Material 3
- Light/Dark mode support patterns

### 5. Navigation System (NEW)

**GoRouter Configuration**

- Route definition patterns
- Route constants with k prefix
- Navigation with data passing
- Complete router configuration examples

### 6. Connectivity Monitoring (NEW)

**ConnectivityWrapper Pattern**

- Overlay-based offline handling
- Real-time network monitoring
- Internet reachability verification
- State preservation during connectivity changes

### 7. Data Models (NEW)

**Model Patterns**

- Immutable fields requirement
- fromJson/toJson methods
- copyWith for mutable operations
- Examples from actual GatePass models

### 8. Extensions (NEW)

**SizedBox Extension**

```dart
12.heightBox  // Vertical spacing
16.widthBox   // Horizontal spacing
```

**DateTime Extension**

```dart
date.formatDate()
date.formatTime()
date.formatDateTime()
```

### 9. Code Style Guidelines (ENHANCED)

**Naming Conventions**

- Constants with k prefix (kPrimaryColor, kDashboardRoute)
- Private members with underscore
- Provider naming patterns
- Route constant patterns

**File Organization**

- Import ordering (Dart SDK ‚Üí Flutter ‚Üí Third-party ‚Üí Project)
- Class structure standards
- Widget composition patterns
- Provider placement conventions

### 10. Common Patterns (NEW)

- Loading states handling
- Error display patterns
- Form validation with GlobalKey
- List building optimizations
- Responsive design patterns
- Conditional rendering

### 11. Feature-Specific Patterns (NEW)

**Dashboard Analytics**

- FL Chart implementation
- Metrics display patterns

**QR Code Scanning**

- Input dialog flow
- Fetch and navigate pattern

**Item Verification**

- Multi-step workflow
- State update patterns

**Member Authentication**

- Auth flow with token storage
- Auto-login check pattern

### 12. Security Best Practices (NEW)

- Token management with SharedPreferences
- API security guidelines
- HTTPS enforcement
- Environment variable usage

### 13. Debugging Patterns (NEW)

- kDebugMode usage
- dev.log structured logging
- Error boundaries

### 14. Performance Optimization (NEW)

**Widget Optimization**

- Const constructor usage
- Key usage for lists
- Selective watching with .select()

**Memory Management**

- Controller disposal patterns
- CachedNetworkImage configuration

### 15. Migration Guidelines (NEW)

**Adding New Features**

- Step-by-step feature creation guide
- Structure requirements
- Router updates

**Modifying Existing Features**

- Compatibility checks
- Testing requirements

### 16. Reference Examples (NEW)

- Dashboard implementation reference
- Gate Pass workflow reference
- Authentication flow reference
- Custom widget locations
- Provider examples with file paths

### 17. Project-Specific Rules (NEW)

**MUST Follow (10 Rules)**

1. AsyncNotifier pattern for all providers
2. Repository layer for all API calls
3. CustomScaffold for all screens
4. AppColors for all colors
5. Route constants in app_routes.dart
6. SizedBox extensions for spacing
7. CustomDialog utilities
8. CustomSnackbar utilities
9. CustomTextField for inputs
10. CustomButton variants for actions

**AVOID (10 Anti-patterns)**

- Listed common mistakes to avoid
- Explained why each should be avoided

**Code Review Checklist**

- 12-point checklist before committing
- Covers patterns, resources, testing, themes

## üîë Key Improvements Over Original

### Original Generic Instructions

- Generic Flutter/Dart guidelines
- No project context
- Basic patterns only
- No actual code examples from project

### Updated Project-Specific Instructions

‚úÖ **PCQ FIR Pilot App Context** - Complete project understanding
‚úÖ **Real Code Examples** - All examples from actual codebase
‚úÖ **AsyncNotifier Pattern** - Primary state management documented
‚úÖ **ApiClient Pattern** - Custom network layer explained
‚úÖ **Custom Widgets** - All reusable components documented
‚úÖ **Connectivity Wrapper** - Unique offline handling pattern
‚úÖ **Route Constants** - k prefix convention explained
‚úÖ **Feature Workflows** - Dashboard, Auth, Gate Pass patterns
‚úÖ **Project Rules** - 10 MUST follow, 10 AVOID rules
‚úÖ **Code Review Checklist** - 12 verification points

## üì¶ Preserved Content

The following sections from the original were preserved:

- Package Management guidelines
- Code Quality principles
- Dart Best Practices
- Flutter Best Practices
- API Design Principles
- Lint Rules
- Data Handling & Serialization
- Logging guidelines
- Code Generation
- Testing frameworks
- Visual Design & Theming
- Material Theming Best Practices
- Layout Best Practices
- Color Scheme Best Practices
- Font Best Practices
- Documentation standards

## üéì Usage Guidelines

### For AI Assistants

This file should be used to:

1. Understand the project architecture before making changes
2. Follow established patterns for consistency
3. Reference actual code examples from the project
4. Verify against the code review checklist

### For New Developers

This file provides:

1. Complete onboarding documentation
2. Architectural patterns used in the project
3. Step-by-step examples for common tasks
4. Best practices specific to this codebase

### For Code Reviews

Check against:

1. MUST Follow rules (10 items)
2. AVOID anti-patterns (10 items)
3. Code Review Checklist (12 points)

## üîÑ Future Updates

When updating this file:

1. Add new patterns as they emerge
2. Update examples when architecture changes
3. Document new feature workflows
4. Keep technology stack versions current
5. Maintain consistency with actual codebase

## üìù File Location

```
/Users/wasimzaman/Wasim/coding/--Flutter/Nartec/pcq_fir_pilot_app/.instructions.md
```

## ü§ù Contributing

When adding new patterns to the project:

1. Document them in this file
2. Provide code examples from actual implementation
3. Add to appropriate section or create new section
4. Update the Code Review Checklist if needed
